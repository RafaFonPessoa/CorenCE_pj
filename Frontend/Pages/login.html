<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="../styles/images/coren-ce_favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="../styles/login_cadastro_style.css">
    <title>Pagina de Login</title>
</head>
<body>
    <div class="main-block">
        <div class="page-top">
            <img id="logo-coren" alt="logo-coren-ce" src="../styles/images/coren-ce_logo.png">
            <h1>Seja Bem-vindo(a)!</h1>
            <h4>Efetue o login para prosseguir</h4>
        </div>

        <div class="form-position">
            <form id="loginForm" class="input-group">
                <label class="label">Usuário</label>
                <input id="user-input" autocomplete="off" name="user" class="input" type="text">
                <label class="label">Senha</label>
                <input id="password-input" autocomplete="off" name="password" class="input" type="password">
                <button id="btn-submit" type="submit">
                     <span id="btn-text">Entrar</span>
                </button>
            </form>
        </div>

        <footer>
            <p>© 2023 Coren-ce</p>
        </footer>
    </div>

    <!-- Axios -->
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    
    <script>
        // Adicione um evento de submit ao formulário
        document.getElementById("loginForm").addEventListener("submit", function (event) {
            event.preventDefault(); // Evita o comportamento padrão do formulário

            // Obtém os valores do formulário
            const user = document.getElementById("user-input").value.trim();
            const password = document.getElementById("password-input").value.trim();

            // Faz a validação no frontend (opcional)
            if (!user || !password) {
                alert("Preencha todos os campos para fazer login!");
                return;
            }

            // Faz a requisição POST para a API backend
            axios.post("http://localhost:5500/api/login", { username: user, password: password })
                .then(response => {
                    // Se o login foi bem-sucedido, redireciona para a página principal
                    window.location.href = "pagina_principal.html";
                })
                .catch(error => {
                    // Se houve um erro no login, exibe uma mensagem de erro
                    alert("Usuário ou senha incorretos. Tente novamente.");
                });
        });
    </script>
</body>
</html>
